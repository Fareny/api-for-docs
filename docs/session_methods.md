
# Описание API методов

### 1. Авторизация по логину и паролю
- **Метод:** `POST /auth/login`
- **Что приходит:**
  - `login` (строка) — логин пользователя.
  - `password` (строка) — пароль пользователя.
  
- **Что уходит:**
  - `accessToken` (строка) — токен для доступа (временный).
  - `refreshToken` (строка) — токен для обновления (долгосрочный).
  
- **Что нужно сделать:**
  - Проверить, что переданный логин и пароль совпадают с данными в базе.
  - Если совпадают, сгенерировать два токена: `accessToken` и `refreshToken`.
  - Ответить с этими токенами.
  - Если логин или пароль неправильный — вернуть ошибку 401 с сообщением "Неверный логин или пароль".

### 2. Отправка SMS-кода на телефон
- **Метод:** `POST /auth/sendCode`
- **Что приходит:**
  - `phone` (строка) — номер телефона пользователя.

- **Что уходит:**
  - `success` (булевое) — успешность операции (например, `true`).

- **Что нужно сделать:**
  - Проверить, что номер телефона присутствует.
  - Сгенерировать код (например, '1111') и отправить его на указанный номер (можно использовать мок-сервис).
  - Ответить с флагом `success: true`, если код успешно отправлен.
  - Если телефон не указан — вернуть ошибку 400 с сообщением "Телефон обязателен".

### 3. Подтверждение SMS-кода
- **Метод:** `POST /auth/verifyCode`
- **Что приходит:**
  - `phone` (строка) — номер телефона.
  - `code` (строка) — код, введенный пользователем.

- **Что уходит:**
  - `accessToken` (строка) — новый токен для доступа.
  - `refreshToken` (строка) — новый токен для обновления.

- **Что нужно сделать:**
  - Проверить, что оба параметра (телефон и код) присутствуют.
  - Проверить, что код совпадает с тем, который был отправлен ранее.
  - Если код правильный, сгенерировать и вернуть два токена: `accessToken` и `refreshToken`.
  - Если код неверный — вернуть ошибку 400 с сообщением "Неверный код".

### 4. Обновление токена
- **Метод:** `POST /auth/refresh`
- **Что приходит:**
  - `refreshToken` (строка) — токен для обновления.

- **Что уходит:**
  - `accessToken` (строка) — новый токен для доступа.

- **Что нужно сделать:**
  - Проверить, что передан `refreshToken` и он существует в базе.
  - Если токен валиден, сгенерировать новый `accessToken` и вернуть его.
  - Если токен не существует — вернуть ошибку 401 с сообщением "Неверный refresh токен".

### 5. Выход из системы
- **Метод:** `POST /auth/logout`
- **Что приходит:**
  - `refreshToken` (строка) — токен для выхода.

- **Что уходит:**
  - `success` (булевое) — успешность операции (например, `true`).

- **Что нужно сделать:**
  - Удалить переданный `refreshToken` из базы.
  - Ответить с флагом `success: true`, если токен удален успешно.

### 6. Получение данных текущего пользователя
- **Метод:** `GET /me`
- **Что приходит:**
  - `Authorization` (строка) — заголовок с токеном в формате `Bearer <accessToken>`.
  
- **Что уходит:**
  - `name` (строка) — имя пользователя.
  - `login` (строка) — логин пользователя (может быть пустым).
  - `phone` (строка) — телефон пользователя (может быть пустым).

- **Что нужно сделать:**
  - Проверить, что в заголовке передан правильный `accessToken`.
  - Найти пользователя с этим токеном.
  - Если токен валиден, вернуть информацию о пользователе.
  - Если токен неверный или отсутствует — вернуть ошибку 401 с сообщением "Неверный токен".

### 7. Проверка доступности сервера
- **Метод:** `GET /ping`
- **Что приходит:**
  - Нет.
  
- **Что уходит:**
  - `status` (строка) — статус сервера (например, "ok").
  - `timestamp` (строка) — текущая дата и время (например, "2025-07-13T14:30:00Z").
  
- **Что нужно сделать:**
  - Ответить с текущим статусом сервера и временной меткой.
